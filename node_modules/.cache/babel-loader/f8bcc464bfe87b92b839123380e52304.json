{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ENA/diabetes-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ENA/diabetes-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ENA/diabetes-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{forms}from'./formmodel';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Form=function Form(_ref){var onInputChange=_ref.onInputChange,onSelectChange=_ref.onSelectChange,formData=_ref.formData,initialFormData=_ref.initialFormData;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formErrors=_useState2[0],setFormErrors=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSubmitted=_useState4[0],setIsSubmitted=_useState4[1];var _useState5=useState('hidden'),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];var data={Name:formData['user']['name'],Email:formData['user']['email'],Pregnancies:formData['user']['pregnancy'],Glucose:formData['user']['glucose'],BloodPressure:formData['user']['pressure'],SkinThickness:formData['user']['thickness'],Insulin:formData['user']['insulin'],BMI:formData['user']['bmi'],DiabetesPedigreeFunction:formData['family']['states'][0],Age:formData['user']['age']};var onSubmit=function onSubmit(e){e.preventDefault();setFormErrors(validate(data));setIsSubmitted(true);};var makeDiagnosis=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fetch(\"http://127.0.0.1:8000/api/users/diagnosis/\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});case 1:case\"end\":return _context.stop();}}},_callee);}));return function makeDiagnosis(){return _ref2.apply(this,arguments);};}();var reset=function reset(){formData=initialFormData;};useEffect(function(){if(Object.keys(formErrors).length===0&&isSubmitted){makeDiagnosis();setSuccess('');reset();}},[formErrors,isSubmitted]);var validate=function validate(data){var errors={};var regex=new RegExp('[a-z0-9]+@[a-z]+.[a-z]{2,3}');if(data.Name===''||data.Age===0||!data.DiabetesPedigreeFunction){errors.field='Please fill all fields';}if(data.Email===''){errors.email='Email address is required';}else if(!regex.test(data.Email)){errors.email='Please enter a valid Email address';}return errors;};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[forms.map(function(form,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col my-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"my-2 font-bold\",children:form.label}),/*#__PURE__*/_jsx(\"input\",{onChange:onInputChange,className:\"focus:outline-none focus:ring focus:border-blue-300 h-10 pl-4 text-lg border-2\",type:form.type,name:form.name})]},index);}),/*#__PURE__*/_jsx(\"label\",{className:\"mb-2 mt-8 font-bold\",children:\"Do you have any known family history of diabetes? (Required)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center flex-row border-2 w-1/2 mt-2 h-10 pl-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"1\",name:\"states\",onChange:onSelectChange,className:\"mr-4\"}),/*#__PURE__*/_jsx(\"label\",{className:\"text-lg font-semibold\",children:\"Yes I do\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center flex-row border-x-2 border-b-2 w-1/2 h-10 pl-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"0\",name:\"states\",onChange:onSelectChange,className:\"mr-4 mt-2\"}),/*#__PURE__*/_jsx(\"label\",{className:\"text-lg font-semibold\",children:\"No I do not\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 mt-2\",children:formErrors.field}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:formErrors.email}),/*#__PURE__*/_jsx(\"div\",{className:success,children:/*#__PURE__*/_jsx(\"p\",{className:\"text-green-500 mt-4 text-lg font-semibold\",children:\"You will receive an email with the results of this assessment\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-600 text-white font-semibold  rounded-sm h-12 w-36 my-8 text-lg\",children:\"Submit\"})})]});};export default Form;","map":{"version":3,"names":["React","useState","useEffect","forms","Form","onInputChange","onSelectChange","formData","initialFormData","formErrors","setFormErrors","isSubmitted","setIsSubmitted","success","setSuccess","data","Name","Email","Pregnancies","Glucose","BloodPressure","SkinThickness","Insulin","BMI","DiabetesPedigreeFunction","Age","onSubmit","e","preventDefault","validate","makeDiagnosis","fetch","method","headers","body","JSON","stringify","reset","Object","keys","length","errors","regex","RegExp","field","email","test","map","form","index","label","type","name"],"sources":["C:/Users/ENA/diabetes-frontend/src/components/Form.tsx"],"sourcesContent":["import React, { useState,useEffect, ChangeEvent, FormEvent } from 'react'\r\nimport { FormData} from './reducer'\r\nimport {forms} from './formmodel'\r\n\r\ninterface Props {\r\n  onInputChange: (e: ChangeEvent<HTMLInputElement>) => void\r\n  onSelectChange: (e: ChangeEvent<HTMLInputElement>) => void\r\n  formData: FormData\r\n  initialFormData:FormData\r\n}\r\n\r\ntype Errors = {\r\n    field?:string,\r\n    email?:string\r\n}\r\n\r\ntype Data = {\r\n    Name : string ,\r\n    Email : string,\r\n    Pregnancies : number,\r\n    Glucose  : number,\r\n    BloodPressure  : number,\r\n    SkinThickness  : number,\r\n    Insulin  : number,\r\n    BMI  : number,\r\n    DiabetesPedigreeFunction  : number,\r\n    Age:number\r\n}\r\n\r\nconst Form:React.FC<Props> = ({ onInputChange, onSelectChange, formData, initialFormData }) => {\r\n    const [formErrors, setFormErrors ] = useState<Errors>({})\r\n    const [isSubmitted, setIsSubmitted] =  useState<boolean>(false)\r\n    const [success, setSuccess] = useState<string>('hidden')\r\n\r\n    const data:Data = {\r\n        Name : formData['user']['name'] ,\r\n        Email : formData['user']['email'],\r\n        Pregnancies : formData['user']['pregnancy'],\r\n        Glucose  : formData['user']['glucose'],\r\n        BloodPressure  : formData['user']['pressure'],\r\n        SkinThickness  : formData['user']['thickness'],\r\n        Insulin  : formData['user']['insulin'],\r\n        BMI  : formData['user']['bmi'],\r\n        DiabetesPedigreeFunction  : formData['family']['states'][0],\r\n\t    Age:formData['user']['age']\r\n    }\r\n\r\n    const onSubmit = (e: FormEvent) => {\r\n        e.preventDefault()\r\n        setFormErrors(validate(data))\r\n        setIsSubmitted(true)\r\n    }\r\n\r\n    let makeDiagnosis = async () => {\r\n        fetch(`http://127.0.0.1:8000/api/users/diagnosis/`, {\r\n            method:'POST',\r\n            headers:{\r\n                'Content-Type':'application/json',\r\n            },\r\n            body:JSON.stringify(data)\r\n        })\r\n    }    \r\n\r\n    const reset = () => {\r\n        formData = initialFormData\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(Object.keys(formErrors).length === 0 && isSubmitted){\r\n            makeDiagnosis()\r\n            setSuccess('')\r\n            reset()\r\n        }\r\n    }, [formErrors, isSubmitted])\r\n\r\n    let validate = (data:Data) => {\r\n        const errors:Errors = {};\r\n        const regex = new RegExp('[a-z0-9]+@[a-z]+.[a-z]{2,3}');\r\n        if (data.Name === '' || data.Age === 0 || !data.DiabetesPedigreeFunction  ){\r\n            errors.field = 'Please fill all fields'\r\n        }\r\n        if (data.Email === ''){\r\n            errors.email = 'Email address is required'\r\n        }else if (!regex.test(data.Email)){\r\n            errors.email = 'Please enter a valid Email address'\r\n        }\r\n        return errors\r\n       \r\n    };\r\n\r\n  return (\r\n    <form onSubmit={onSubmit}>\r\n      {\r\n        forms.map((form, index)=>(\r\n          <div key={index} className='flex flex-col my-2'>\r\n            <label className='my-2 font-bold'>{form.label}</label>\r\n            <input onChange={onInputChange} className='focus:outline-none focus:ring focus:border-blue-300 h-10 pl-4 text-lg border-2' type={form.type} name={form.name}/>\r\n          </div>  \r\n        ))\r\n      } \r\n      <label className='mb-2 mt-8 font-bold'>Do you have any known family history of diabetes? (Required)</label>\r\n      <div className='flex flex-col'>\r\n        <div className='flex items-center flex-row border-2 w-1/2 mt-2 h-10 pl-2'>\r\n            <input\r\n                type=\"radio\"\r\n                value=\"1\"\r\n                name='states'\r\n                onChange={onSelectChange}\r\n                className='mr-4'\r\n            />\r\n            <label className='text-lg font-semibold'>Yes I do</label>\r\n        </div>\r\n        <div className='flex items-center flex-row border-x-2 border-b-2 w-1/2 h-10 pl-2'>\r\n            <input\r\n                type=\"radio\"\r\n                value= '0'\r\n                name='states'\r\n                onChange={onSelectChange}\r\n                className='mr-4 mt-2'\r\n            />\r\n            <label className='text-lg font-semibold'>No I do not</label>\r\n        </div>\r\n      </div>\r\n      <p className='text-red-500 mt-2'>{formErrors.field}</p>\r\n      <p className='text-red-500'>{formErrors.email}</p>\r\n      <div className={success}><p className='text-green-500 mt-4 text-lg font-semibold'>You will receive an email with the results of this assessment</p></div>\r\n      <div className='flex items-center justify-center'><button type=\"submit\" className='bg-blue-600 text-white font-semibold  rounded-sm h-12 w-36 my-8 text-lg'>Submit</button></div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default Form\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}