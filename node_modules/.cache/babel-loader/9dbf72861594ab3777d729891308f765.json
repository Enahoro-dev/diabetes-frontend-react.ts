{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ENA\\\\diabetes-frontend\\\\src\\\\components\\\\Form.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { forms } from './formmodel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Form = _ref => {\n  _s();\n\n  let {\n    onInputChange,\n    onSelectChange,\n    formData,\n    initialFormData\n  } = _ref;\n  const [formErrors, setFormErrors] = useState({});\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [success, setSuccess] = useState('hidden');\n  const data = {\n    Name: formData['user']['name'],\n    Email: formData['user']['email'],\n    Pregnancies: formData['user']['pregnancy'],\n    Glucose: formData['user']['glucose'],\n    BloodPressure: formData['user']['pressure'],\n    SkinThickness: formData['user']['thickness'],\n    Insulin: formData['user']['insulin'],\n    BMI: formData['user']['bmi'],\n    DiabetesPedigreeFunction: formData['family']['states'][0],\n    Age: formData['user']['age']\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n    setFormErrors(validate(data));\n    setIsSubmitted(true);\n  };\n\n  let makeDiagnosis = async () => {\n    fetch(`http://127.0.0.1:8000/api/users/diagnosis/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    });\n  };\n\n  const reset = () => {\n    formData = initialFormData;\n  };\n\n  useEffect(() => {\n    if (Object.keys(formErrors).length === 0 && isSubmitted) {\n      makeDiagnosis();\n      setSuccess('');\n      reset();\n    }\n  }, [formErrors, isSubmitted]);\n\n  let validate = data => {\n    const errors = {};\n    const regex = new RegExp('[a-z0-9]+@[a-z]+.[a-z]{2,3}');\n\n    if (data.Name === '' || data.Age === 0 || !data.DiabetesPedigreeFunction) {\n      errors.field = 'Please fill all fields';\n    }\n\n    if (data.Email === '') {\n      errors.email = 'Email address is required';\n    } else if (!regex.test(data.Email)) {\n      errors.email = 'Please enter a valid Email address';\n    }\n\n    return errors;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmit,\n    children: [forms.map((form, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col my-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"my-2 font-bold\",\n        children: form.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: onInputChange,\n        className: \"focus:outline-none focus:ring focus:border-blue-300 h-10 pl-4 text-lg border-2\",\n        type: form.type,\n        name: form.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }, this)), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"mb-2 mt-8 font-bold\",\n      children: \"Do you have any known family history of diabetes? (Required)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center flex-row border-2 w-1/2 mt-2 h-10 pl-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          value: \"1\",\n          name: \"states\",\n          onChange: onSelectChange,\n          className: \"mr-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-lg font-semibold\",\n          children: \"Yes I do\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center flex-row border-x-2 border-b-2 w-1/2 h-10 pl-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          value: \"0\",\n          name: \"states\",\n          onChange: onSelectChange,\n          className: \"mr-4 mt-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-lg font-semibold\",\n          children: \"No I do not\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500 mt-2\",\n      children: formErrors.field\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500\",\n      children: formErrors.email\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: success,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-green-500 mt-4 text-lg font-semibold\",\n        children: \"You will receive an email with the results of this assessment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 32\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"bg-blue-600 text-white font-semibold  rounded-sm h-12 w-36 my-8 text-lg\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 57\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Form, \"qWU4Mnle7tew6NAX+WlU36WPD+I=\");\n\n_c = Form;\nexport default Form;\n\nvar _c;\n\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"names":["React","useState","useEffect","forms","Form","onInputChange","onSelectChange","formData","initialFormData","formErrors","setFormErrors","isSubmitted","setIsSubmitted","success","setSuccess","data","Name","Email","Pregnancies","Glucose","BloodPressure","SkinThickness","Insulin","BMI","DiabetesPedigreeFunction","Age","onSubmit","e","preventDefault","validate","makeDiagnosis","fetch","method","headers","body","JSON","stringify","reset","Object","keys","length","errors","regex","RegExp","field","email","test","map","form","index","label","type","name"],"sources":["C:/Users/ENA/diabetes-frontend/src/components/Form.tsx"],"sourcesContent":["import React, { useState,useEffect, ChangeEvent, FormEvent } from 'react'\r\nimport { FormData} from './reducer'\r\nimport {forms} from './formmodel'\r\n\r\ninterface Props {\r\n  onInputChange: (e: ChangeEvent<HTMLInputElement>) => void\r\n  onSelectChange: (e: ChangeEvent<HTMLInputElement>) => void\r\n  formData: FormData\r\n  initialFormData:FormData\r\n}\r\n\r\ntype Errors = {\r\n    field?:string,\r\n    email?:string\r\n}\r\n\r\ntype Data = {\r\n    Name : string ,\r\n    Email : string,\r\n    Pregnancies : number,\r\n    Glucose  : number,\r\n    BloodPressure  : number,\r\n    SkinThickness  : number,\r\n    Insulin  : number,\r\n    BMI  : number,\r\n    DiabetesPedigreeFunction  : number,\r\n    Age:number\r\n}\r\n\r\nconst Form:React.FC<Props> = ({ onInputChange, onSelectChange, formData, initialFormData }) => {\r\n    const [formErrors, setFormErrors ] = useState<Errors>({})\r\n    const [isSubmitted, setIsSubmitted] =  useState<boolean>(false)\r\n    const [success, setSuccess] = useState<string>('hidden')\r\n\r\n    const data:Data = {\r\n        Name : formData['user']['name'] ,\r\n        Email : formData['user']['email'],\r\n        Pregnancies : formData['user']['pregnancy'],\r\n        Glucose  : formData['user']['glucose'],\r\n        BloodPressure  : formData['user']['pressure'],\r\n        SkinThickness  : formData['user']['thickness'],\r\n        Insulin  : formData['user']['insulin'],\r\n        BMI  : formData['user']['bmi'],\r\n        DiabetesPedigreeFunction  : formData['family']['states'][0],\r\n\t    Age:formData['user']['age']\r\n    }\r\n\r\n    const onSubmit = (e: FormEvent) => {\r\n        e.preventDefault()\r\n        setFormErrors(validate(data))\r\n        setIsSubmitted(true)\r\n    }\r\n\r\n    let makeDiagnosis = async () => {\r\n        fetch(`http://127.0.0.1:8000/api/users/diagnosis/`, {\r\n            method:'POST',\r\n            headers:{\r\n                'Content-Type':'application/json',\r\n            },\r\n            body:JSON.stringify(data)\r\n        })\r\n    }    \r\n\r\n    const reset = () => {\r\n        formData = initialFormData\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(Object.keys(formErrors).length === 0 && isSubmitted){\r\n            makeDiagnosis()\r\n            setSuccess('')\r\n            reset()\r\n        }\r\n    }, [formErrors, isSubmitted])\r\n\r\n    let validate = (data:Data) => {\r\n        const errors:Errors = {};\r\n        const regex = new RegExp('[a-z0-9]+@[a-z]+.[a-z]{2,3}');\r\n        if (data.Name === '' || data.Age === 0 || !data.DiabetesPedigreeFunction  ){\r\n            errors.field = 'Please fill all fields'\r\n        }\r\n        if (data.Email === ''){\r\n            errors.email = 'Email address is required'\r\n        }else if (!regex.test(data.Email)){\r\n            errors.email = 'Please enter a valid Email address'\r\n        }\r\n        return errors\r\n       \r\n    };\r\n\r\n  return (\r\n    <form onSubmit={onSubmit}>\r\n      {\r\n        forms.map((form, index)=>(\r\n          <div key={index} className='flex flex-col my-2'>\r\n            <label className='my-2 font-bold'>{form.label}</label>\r\n            <input onChange={onInputChange} className='focus:outline-none focus:ring focus:border-blue-300 h-10 pl-4 text-lg border-2' type={form.type} name={form.name}/>\r\n          </div>  \r\n        ))\r\n      } \r\n      <label className='mb-2 mt-8 font-bold'>Do you have any known family history of diabetes? (Required)</label>\r\n      <div className='flex flex-col'>\r\n        <div className='flex items-center flex-row border-2 w-1/2 mt-2 h-10 pl-2'>\r\n            <input\r\n                type=\"radio\"\r\n                value=\"1\"\r\n                name='states'\r\n                onChange={onSelectChange}\r\n                className='mr-4'\r\n            />\r\n            <label className='text-lg font-semibold'>Yes I do</label>\r\n        </div>\r\n        <div className='flex items-center flex-row border-x-2 border-b-2 w-1/2 h-10 pl-2'>\r\n            <input\r\n                type=\"radio\"\r\n                value= '0'\r\n                name='states'\r\n                onChange={onSelectChange}\r\n                className='mr-4 mt-2'\r\n            />\r\n            <label className='text-lg font-semibold'>No I do not</label>\r\n        </div>\r\n      </div>\r\n      <p className='text-red-500 mt-2'>{formErrors.field}</p>\r\n      <p className='text-red-500'>{formErrors.email}</p>\r\n      <div className={success}><p className='text-green-500 mt-4 text-lg font-semibold'>You will receive an email with the results of this assessment</p></div>\r\n      <div className='flex items-center justify-center'><button type=\"submit\" className='bg-blue-600 text-white font-semibold  rounded-sm h-12 w-36 my-8 text-lg'>Submit</button></div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default Form\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}